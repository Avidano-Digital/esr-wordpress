!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t,i=navigator.userAgent,n=/iphone/i.test(i),o=/chrome/i.test(i),a=/android/i.test(i);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var i;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(i=this.createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),e=0-i.duplicate().moveStart("character",-1e5),t=e+i.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(i,s){var l,r,d,c,f,u,h,p;if(!i&&this.length>0){l=e(this[0]);var m=l.data(e.mask.dataName);return m?m():void 0}return s=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},s),r=e.mask.definitions,d=[],c=h=i.length,f=null,e.each(i.split(""),function(e,t){"?"==t?(h--,c=e):r[t]?(d.push(new RegExp(r[t])),null===f&&(f=d.length-1),c>e&&(u=d.length-1)):d.push(null)}),this.trigger("unmask").each(function(){function l(){if(s.completed){for(var e=f;u>=e;e++)if(d[e]&&E[e]===m(e))return;s.completed.call(_)}}function m(e){return s.placeholder.charAt(e<s.placeholder.length?e:0)}function g(e){for(;++e<h&&!d[e];);return e}function v(e){for(;--e>=0&&!d[e];);return e}function b(e,t){var i,n;if(!(0>e)){for(i=e,n=g(t);h>i;i++)if(d[i]){if(!(h>n&&d[i].test(E[n])))break;E[i]=E[n],E[n]=m(n),n=g(n)}U(),_.caret(Math.max(f,e))}}function y(e){var t,i,n,o;for(t=e,i=m(e);h>t;t++)if(d[t]){if(n=g(t),o=E[t],E[t]=i,!(h>n&&d[n].test(o)))break;i=o}}function k(){var e=_.val(),t=_.caret();if(p&&p.length&&p.length>e.length){for(T(!0);t.begin>0&&!d[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<f&&!d[t.begin];)t.begin++;_.caret(t.begin,t.begin)}else{for(T(!0);t.begin<h&&!d[t.begin];)t.begin++;_.caret(t.begin,t.begin)}l()}function w(){T(),_.val()!=j&&_.change()}function x(e){if(!_.prop("readonly")){var t,i,o,a=e.which||e.keyCode;p=_.val(),8===a||46===a||n&&127===a?(t=_.caret(),i=t.begin,o=t.end,o-i==0&&(i=46!==a?v(i):o=g(i-1),o=46===a?g(o):o),C(i,o),b(i,o-1),e.preventDefault()):13===a?w.call(this,e):27===a&&(_.val(j),_.caret(0,T()),e.preventDefault())}}function I(t){if(!_.prop("readonly")){var i,n,o,s=t.which||t.keyCode,r=_.caret();if(!(t.ctrlKey||t.altKey||t.metaKey||32>s)&&s&&13!==s){if(r.end-r.begin!=0&&(C(r.begin,r.end),b(r.begin,r.end-1)),i=g(r.begin-1),h>i&&(n=String.fromCharCode(s),d[i].test(n))){if(y(i),E[i]=n,U(),o=g(i),a){var c=function(){e.proxy(e.fn.caret,_,o)()};setTimeout(c,0)}else _.caret(o);r.begin<=u&&l()}t.preventDefault()}}}function C(e,t){var i;for(i=e;t>i&&h>i;i++)d[i]&&(E[i]=m(i))}function U(){_.val(E.join(""))}function T(e){var t,i,n,o=_.val(),a=-1;for(t=0,n=0;h>t;t++)if(d[t]){for(E[t]=m(t);n++<o.length;)if(i=o.charAt(n-1),d[t].test(i)){E[t]=i,a=t;break}if(n>o.length){C(t+1,h);break}}else E[t]===o.charAt(n)&&n++,c>t&&(a=t);return e?U():c>a+1?s.autoclear||E.join("")===S?(_.val()&&_.val(""),C(0,h)):U():(U(),_.val(_.val().substring(0,a+1))),c?t:f}var _=e(this),E=e.map(i.split(""),function(e,t){return"?"!=e?r[e]?m(t):e:void 0}),S=E.join(""),j=_.val();_.data(e.mask.dataName,function(){return e.map(E,function(e,t){return d[t]&&e!=m(t)?e:null}).join("")}),_.one("unmask",function(){_.off(".mask").removeData(e.mask.dataName)}).on("focus.mask",function(){if(!_.prop("readonly")){clearTimeout(t);var e;j=_.val(),e=T(),t=setTimeout(function(){_.get(0)===document.activeElement&&(U(),e==i.replace("?","").length?_.caret(0,e):_.caret(e))},10)}}).on("blur.mask",w).on("keydown.mask",x).on("keypress.mask",I).on("input.mask paste.mask",function(){_.prop("readonly")||setTimeout(function(){var e=T(!0);_.caret(e),l()},0)}),o&&a&&_.off("input.mask").on("input.mask",k),T()})}})}),function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(o,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),function(){"use strict";function e(e){function t(t,n){var a,m,g=t==window,v=n&&void 0!==n.message?n.message:void 0;if(n=e.extend({},e.blockUI.defaults,n||{}),!n.ignoreIfBlocked||!e(t).data("blockUI.isBlocked")){if(n.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,n.overlayCSS||{}),a=e.extend({},e.blockUI.defaults.css,n.css||{}),n.onOverlayClick&&(n.overlayCSS.cursor="pointer"),m=e.extend({},e.blockUI.defaults.themedCSS,n.themedCSS||{}),v=void 0===v?n.message:v,g&&h&&i(window,{fadeOut:0}),v&&"string"!=typeof v&&(v.parentNode||v.jquery)){var b=v.jquery?v[0]:v,y={};e(t).data("blockUI.history",y),y.el=b,y.parent=b.parentNode,y.display=b.style.display,y.position=b.style.position,y.parent&&y.parent.removeChild(b)}e(t).data("blockUI.onUnblock",n.onUnblock);var k,w,x,I,C=n.baseZ;k=e(c||n.forceIframe?'<iframe class="blockUI" style="z-index:'+C+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+n.iframeSrc+'"></iframe>':'<div class="blockUI" style="display:none"></div>'),w=e(n.theme?'<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+C+++';display:none"></div>':'<div class="blockUI blockOverlay" style="z-index:'+C+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),n.theme&&g?(I='<div class="blockUI '+n.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(C+10)+';display:none;position:fixed">',n.title&&(I+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(n.title||"&nbsp;")+"</div>"),I+='<div class="ui-widget-content ui-dialog-content"></div>',I+="</div>"):n.theme?(I='<div class="blockUI '+n.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(C+10)+';display:none;position:absolute">',n.title&&(I+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(n.title||"&nbsp;")+"</div>"),I+='<div class="ui-widget-content ui-dialog-content"></div>',I+="</div>"):I=g?'<div class="blockUI '+n.blockMsgClass+' blockPage" style="z-index:'+(C+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+n.blockMsgClass+' blockElement" style="z-index:'+(C+10)+';display:none;position:absolute"></div>',x=e(I),v&&(n.theme?(x.css(m),x.addClass("ui-widget-content")):x.css(a)),n.theme||w.css(n.overlayCSS),w.css("position",g?"fixed":"absolute"),(c||n.forceIframe)&&k.css("opacity",0);var U=[k,w,x],T=e(g?"body":t);e.each(U,function(){this.appendTo(T)}),n.theme&&n.draggable&&e.fn.draggable&&x.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var _=u&&(!e.support.boxModel||e("object,embed",g?null:t).length>0);if(f||_){if(g&&n.allowBodyStretch&&e.support.boxModel&&e("html,body").css("height","100%"),(f||!e.support.boxModel)&&!g)var E=r(t,"borderTopWidth"),S=r(t,"borderLeftWidth"),j=E?"(0 - "+E+")":0,O=S?"(0 - "+S+")":0;e.each(U,function(e,t){var i=t[0].style;if(i.position="absolute",2>e)g?i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+n.quirksmodeOffsetHack+') + "px"'):i.setExpression("height",'this.parentNode.offsetHeight + "px"'),g?i.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):i.setExpression("width",'this.parentNode.offsetWidth + "px"'),O&&i.setExpression("left",O),j&&i.setExpression("top",j);else if(n.centerY)g&&i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),i.marginTop=0;else if(!n.centerY&&g){var o=n.css&&n.css.top?parseInt(n.css.top,10):0,a="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+o+') + "px"';i.setExpression("top",a)}})}if(v&&(n.theme?x.find(".ui-widget-content").append(v):x.append(v),(v.jquery||v.nodeType)&&e(v).show()),(c||n.forceIframe)&&n.showOverlay&&k.show(),n.fadeIn){var A=n.onBlock?n.onBlock:d,M=n.showOverlay&&!v?A:d,F=v?A:d;n.showOverlay&&w._fadeIn(n.fadeIn,M),v&&x._fadeIn(n.fadeIn,F)}else n.showOverlay&&w.show(),v&&x.show(),n.onBlock&&n.onBlock.bind(x)();if(o(1,t,n),g?(h=x[0],p=e(n.focusableElements,h),n.focusInput&&setTimeout(s,20)):l(x[0],n.centerX,n.centerY),n.timeout){var K=setTimeout(function(){g?e.unblockUI(n):e(t).unblock(n)},n.timeout);e(t).data("blockUI.timeout",K)}}}function i(t,i){var a,s=t==window,l=e(t),r=l.data("blockUI.history"),d=l.data("blockUI.timeout");d&&(clearTimeout(d),l.removeData("blockUI.timeout")),i=e.extend({},e.blockUI.defaults,i||{}),o(0,t,i),null===i.onUnblock&&(i.onUnblock=l.data("blockUI.onUnblock"),l.removeData("blockUI.onUnblock"));var c;c=s?e("body").children().filter(".blockUI").add("body > .blockUI"):l.find(">.blockUI"),i.cursorReset&&(c.length>1&&(c[1].style.cursor=i.cursorReset),c.length>2&&(c[2].style.cursor=i.cursorReset)),s&&(h=p=null),i.fadeOut?(a=c.length,c.stop().fadeOut(i.fadeOut,function(){0==--a&&n(c,r,i,t)})):n(c,r,i,t)}function n(t,i,n,o){var a=e(o);if(!a.data("blockUI.isBlocked")){t.each(function(e,t){this.parentNode&&this.parentNode.removeChild(this)}),i&&i.el&&(i.el.style.display=i.display,i.el.style.position=i.position,i.el.style.cursor="default",i.parent&&i.parent.appendChild(i.el),a.removeData("blockUI.history")),a.data("blockUI.static")&&a.css("position","static"),"function"==typeof n.onUnblock&&n.onUnblock(o,n);var s=e(document.body),l=s.width(),r=s[0].style.width;s.width(l-1).width(l),s[0].style.width=r}}function o(t,i,n){var o=i==window,s=e(i);if((t||(!o||h)&&(o||s.data("blockUI.isBlocked")))&&(s.data("blockUI.isBlocked",t),o&&n.bindEvents&&(!t||n.showOverlay))){var l="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";t?e(document).bind(l,n,a):e(document).unbind(l,a)}}function a(t){if("keydown"===t.type&&t.keyCode&&9==t.keyCode&&h&&t.data.constrainTabKey){var i=p,n=!t.shiftKey&&t.target===i[i.length-1],o=t.shiftKey&&t.target===i[0];if(n||o)return setTimeout(function(){s(o)},10),!1}var a=t.data,l=e(t.target);return l.hasClass("blockOverlay")&&a.onOverlayClick&&a.onOverlayClick(t),l.parents("div."+a.blockMsgClass).length>0||0===l.parents().children().filter("div.blockUI").length}function s(e){if(p){var t=p[!0===e?p.length-1:0];t&&t.focus()}}function l(e,t,i){var n=e.parentNode,o=e.style,a=(n.offsetWidth-e.offsetWidth)/2-r(n,"borderLeftWidth"),s=(n.offsetHeight-e.offsetHeight)/2-r(n,"borderTopWidth");t&&(o.left=a>0?a+"px":"0"),i&&(o.top=s>0?s+"px":"0")}function r(t,i){return parseInt(e.css(t,i),10)||0}e.fn._fadeIn=e.fn.fadeIn;var d=e.noop||function(){},c=/MSIE/.test(navigator.userAgent),f=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),u=(document.documentMode,e.isFunction(document.createElement("div").style.setExpression));e.blockUI=function(e){t(window,e)},e.unblockUI=function(e){i(window,e)},e.growlUI=function(t,i,n,o){var a=e('<div class="growlUI"></div>');t&&a.append("<h1>"+t+"</h1>"),i&&a.append("<h2>"+i+"</h2>"),void 0===n&&(n=3e3);var s=function(t){t=t||{},e.blockUI({message:a,fadeIn:void 0!==t.fadeIn?t.fadeIn:700,fadeOut:void 0!==t.fadeOut?t.fadeOut:1e3,timeout:void 0!==t.timeout?t.timeout:n,centerY:!1,showOverlay:!1,onUnblock:o,css:e.blockUI.defaults.growlCSS})};s(),a.css("opacity"),a.mouseover(function(){s({fadeIn:0,timeout:3e4});var t=e(".blockMsg");t.stop(),t.fadeTo(300,1)}).mouseout(function(){e(".blockMsg").fadeOut(1e3)})},e.fn.block=function(i){if(this[0]===window)return e.blockUI(i),this;var n=e.extend({},e.blockUI.defaults,i||{});return this.each(function(){var t=e(this);n.ignoreIfBlocked&&t.data("blockUI.isBlocked")||t.unblock({fadeOut:0})}),this.each(function(){"static"==e.css(this,"position")&&(this.style.position="relative",e(this).data("blockUI.static",!0)),this.style.zoom=1,t(this,i)})},e.fn.unblock=function(t){return this[0]===window?(e.unblockUI(t),this):this.each(function(){i(this,t)})},e.blockUI.version=2.7,e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var h=null,p=[]}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)}(),function(e){"use strict";function t(t){var i,n=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(n)}function i(t){return this.each(function(){var i=e(this),o=i.data("bs.collapse"),a=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);!o&&a.toggle&&/show|hide/.test(t)&&(a.toggle=!1),o||i.data("bs.collapse",o=new n(this,a)),"string"==typeof t&&o[t]()})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.5",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(t=o.data("bs.collapse"))&&t.transitioning)){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),t||o.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var l=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return l.call(this);var r=e.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",e.proxy(l,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[s](this.$element[0][r])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[i](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION):o.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(i,n){var o=e(n);this.addAriaAndCollapsedClass(t(o),o)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=o,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var o=e(this);o.attr("data-target")||n.preventDefault();var a=t(o),s=a.data("bs.collapse"),l=s?"toggle":o.data();i.call(a,l)})}(jQuery);var give_ffm_frontend;!function(e){window.Give_FFM_Uploader=function(t,i,n,o,a,s){this.container=i,this.browse_button=t,this.max=n||1,this.count=e("#"+i).find(".ffm-attachment-list > li").length,console.log(give_ffm_frontend),e("#"+t).length&&(this.uploader=new plupload.Uploader({runtimes:"html5,html4",browse_button:t,container:i,multipart:!0,multipart_params:{action:"ffm_file_upload"},multiple_queues:!1,multi_selection:!1,urlstream_upload:!0,file_data_name:"ffm_file",max_file_size:s+"kb",url:give_ffm_frontend.plupload.url+"&type="+o,flash_swf_url:give_ffm_frontend.flash_swf_url,filters:[{title:"Allowed Files",extensions:a}]}),this.uploader.bind("Init",e.proxy(this,"init")),this.uploader.bind("FilesAdded",e.proxy(this,"added")),this.uploader.bind("QueueChanged",e.proxy(this,"upload")),this.uploader.bind("UploadProgress",e.proxy(this,"progress")),this.uploader.bind("Error",e.proxy(this,"error")),this.uploader.bind("FileUploaded",e.proxy(this,"uploaded")),this.uploader.init(),e("#"+i).on("click","a.attachment-delete",e.proxy(this.removeAttachment,this)))},Give_FFM_Uploader.prototype={init:function(e,t){this.showHide()},showHide:function(){return this.count>=this.max?void e("#"+this.container).find(".file-selector").hide():void e("#"+this.container).find(".file-selector").show()},added:function(t,i){var n=e("#"+this.container).find(".ffm-attachment-upload-filelist");this.count+=1,this.showHide(),e.each(i,function(e,t){n.append('<div class="upload-item" id="'+t.id+'"><div class="progress progress-striped active"><div class="bar"></div></div><div class="filename original">'+t.name+" ("+plupload.formatSize(t.size)+") <b></b></div></div>")}),t.refresh(),t.start()},upload:function(e){this.uploader.start()},progress:function(t,i){var n=e("#"+i.id);e(".bar",n).css({width:i.percent+"%"}),e(".percent",n).html(i.percent+"%")},error:function(t,i){e("#"+this.container).find("#"+i.file.id).remove(),alert("Error #"+i.code+": "+i.message),this.count-=1,this.showHide(),this.uploader.refresh()},uploaded:function(t,i,n){if(e("#"+i.id+" b").html("100%"),e("#"+i.id).remove(),"error"!==n.response){e("#"+this.container).find(".ffm-attachment-list").append(n.response)}else alert(res.error),this.count-=1,this.showHide()},removeAttachment:function(t){t.preventDefault();var i=this,n=e(t.currentTarget);if(confirm(give_ffm_frontend.confirmMsg)){var o={attach_id:n.data("attach_id"),nonce:give_ffm_frontend.nonce,action:"ffm_file_del"};jQuery.post(give_ffm_frontend.ajaxurl,o,function(){n.parent().parent().remove(),i.count-=1,i.showHide(),i.uploader.refresh()})}}}}(jQuery),function(e){e(function(){e(".js-phone-domestic").mask("(999) 999-9999")})}(jQuery),function(e){var t=e("ul#give-form-fields-editor"),i={init:function(){this.makeSortable(),e("button.ffm-collapse").on("click",this.collapseEditFields),e(".give-form-fields-buttons").on("click","button",this.addNewField),e("#give-form-fields-editor").on("click",".item-delete",this.removeFormField),e("#give-form-fields-editor").on("blur",".js-ffm-field-label",this.setMetaKey),e("#give-form-fields-editor").on("blur",".js-ffm-meta-key",this.setMetaKey),e("#give-form-fields-editor").on("blur",".js-ffm-meta-key",this.checkDuplicateMetaKeys),e("#give-form-fields-editor").on("change",".give-form-fields-sub-fields input[type=text]",function(){e(this).prev("input[type=checkbox], input[type=radio]").val(e(this).val())}),e("#give-form-fields-editor").on("click","input[type=checkbox].multicolumn",function(){var t=e(this),i=t.closest(".give-form-fields-rows");t.is(":checked")?(i.next().hide().next().hide(),i.siblings(".column-names").show()):(i.next().show().next().show(),i.siblings(".column-names").hide())}),e("#give-form-fields-editor").on("click",".ffm-clone-field",this.cloneField),e("#give-form-fields-editor").on("click",".ffm-remove-field",this.removeField)},makeSortable:function(){(t=e("ul#give-form-fields-editor"))&&t.sortable({placeholder:"sortable-placeholder",handle:"> .ffm-legend",distance:5})},addNewField:function(t){t.preventDefault(),e(".ffm-loading").fadeIn();var n=e(this),o=e("ul#give-form-fields-editor"),a=(e("#ffm-metabox-editor"),n.data("name")),s=n.data("type"),l={name:a,type:s,order:o.find("li").length+1,action:"give-form-fields_add_el"};e.post(ajaxurl,l,function(t){o.append(t),i.makeSortable(),e(".ffm-loading").fadeOut(),e(".ffm-no-fields").hide(),i.tooltips()})},removeFormField:function(t){t.preventDefault(),confirm("Are you sure you want to remove this form field?")&&e(this).closest("li").fadeOut(function(){e(this).remove()})},cloneField:function(t){t.preventDefault();var i=e(this).closest("div"),n=i.clone();n.find("input").val(""),n.find(":checked").attr("checked",""),i.after(n)},removeField:function(){var t=e(this).closest("div");t.siblings().andSelf().length>1&&t.remove()},setMetaKey:function(){var t=e(this);if(t.hasClass("js-ffm-field-label"))$fieldLabel=t,$metaKey=t.closest(".give-form-fields-rows").next().find(".js-ffm-meta-key");else{if(!t.hasClass("js-ffm-meta-key"))return!1;$fieldLabel=t.closest(".give-form-fields-rows").prev().find(".js-ffm-field-label"),$metaKey=t}$metaKey.length&&!$metaKey.val()&&(val=$fieldLabel.val().trim().toLowerCase().replace(/[\s\-]/g,"_").replace(/[^a-z0-9_]/g,""),val.length>200&&(val=val.substring(0,200)),$metaKey.val(val))},collapseEditFields:function(t){t.preventDefault(),e("ul#give-form-fields-editor").children("li").find(".collapse").collapse("toggle")},tooltips:function(){jQuery('[data-tooltip!=""]').qtip({content:{attr:"data-tooltip"},style:{classes:"qtip-rounded qtip-tipsy"},position:{my:"bottom center",at:"top center"}})},checkDuplicateMetaKeys:function(t){if($metaKey=e(t.target),justChecked=$metaKey.data("justChecked"),""!==$metaKey.val()){if(justChecked)return void $metaKey.data("justChecked",!1);for(var i=e("#give-form-fields-editor").find(".js-ffm-meta-key").map(function(){return e(this).val()}).sort(),n=0;n<i.length-1;n++)if(i[n+1]==i[n]&&i[n].length)return $metaKey.data("justChecked",!0),alert(give_ffm_formbuilder.error_duplicate_meta),void setTimeout(function(){$metaKey.data("justChecked",!1),$metaKey.focus()},50)}}};e(function(){i.init()})}(jQuery);