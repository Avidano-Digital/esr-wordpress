!function($){var e={init:function(){$("body").on("click",".give-form span.ffm-clone-field",this.cloneField),$("body").on("click",".give-form span.ffm-remove-field",this.removeField),$("body").on("submit","form.give-form",this.formSubmit),this.revealFields(),this.applyMasks(),$("form.give-form").ajaxSuccess(this.resetForm)},resetForm:function(r){$(this).find("textarea.rich-editor").each(function(){var e=$(this).attr("name");tinyMCE.execCommand("mceFocus",!1,e),tinyMCE.execCommand("mceRemoveEditor",!1,e),tinyMCE.execCommand("mceAddEditor",!1,e)}),e.applyMasks()},revealFields:function(){$(".give-display-reveal").each(function(){var e=$(this).find(".give-btn-reveal"),r=e.nextAll("#give-ffm-section");r.hide(),e.on("click",function(){r.slideDown()})})},applyMasks:function(){$("form.give-form .js-phone-domestic").mask("(999) 999-9999")},cloneField:function(e){e.preventDefault();var r=$(this).closest("tr"),i=r.clone();i.find("input").val(""),i.find(":checked").attr("checked",""),r.after(i)},removeField:function(){var e=$(this).closest("tr");e.siblings().andSelf().length>1&&e.remove()},formSubmit:function(r){var i=$(this),a=i.find("input[type=submit]");if(e.validateForm(i))return!0;r.preventDefault()},validateForm:function(r){var i,a="",t=!1,F=[];if(e.removeErrors(r),e.removeErrorNotice(r),r.find('[data-required="yes"]').each(function(r,i){var a=$(i).data("type");switch(n="",a){case"rich":var F=$(i).data("id");""===(n=$.trim(tinyMCE.get(F).getContent()))&&(t=!0,e.markError(i));break;case"textarea":case"text":""===(n=$.trim($(i).val()))&&(t=!0,e.markError(i));break;case"select":(n=$(i).val())&&"-1"!==n||(t=!0,e.markError(i));break;case"multiselect":null!==(n=$(i).val())&&0!==n.length||(t=!0,e.markError(i));break;case"checkbox":var u=$(i).parent().find("input:checked").length;u||(t=!0,e.markError(i));break;case"radio":var u=$(i).parent().find("input:checked").length;u||(t=!0,e.markError(i));break;case"file":var u=$(i).next("ul").children().length;u||(t=!0,e.markError(i));break;case"email":var n=$(i).val();""!==n&&(e.isValidEmail(n)||(t=!0,e.markError(i)));break;case"url":var n=$(i).val();""!==n&&(e.isValidURL(n)||(t=!0,e.markError(i)));break}}),t)return e.addErrorNotice(r),!1;var u=r.serialize(),n=[];return $(".ffm-rich-validation").each(function(e,r){i=$(r).data("id");var a=$.trim(tinyMCE.get(i).getContent());n.push(i+"="+encodeURIComponent(a))}),u=u+"&"+n.join("&")},addErrorNotice:function(e){$(e).find("#give-purchase-button").attr("disabled",!1),$(e).find("#give_purchase_submit").prepend('<div class="give_errors"><p class="give_error">'+give_ffm_frontend.error_message+"</p></div>")},removeErrorNotice:function(e){$(e).find(".ffm-error.give_errors").remove()},markError:function(e){$(e).closest(".form-row").addClass("give-has-error"),$(e).focus()},removeErrors:function(e){$(e).find(".give-has-error").removeClass("give-has-error")},isValidEmail:function(e){return new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e)},isValidURL:function(e){return new RegExp("^(http://www.|https://www.|ftp://www.|www.|http://|https://){1}([0-9A-Za-z]+.)").test(e)}};$(function(){e.init()})}(jQuery);